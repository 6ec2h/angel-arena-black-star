"DOTAAbilities"
{
	"dragon_knight_breathe_fire_arena"
	{
		// General
		//-------------------------------------------------------------------------------------------------------------
		"BaseClass"				"ability_datadriven"
		"AbilityBehavior"				"DOTA_ABILITY_BEHAVIOR_DIRECTIONAL | DOTA_ABILITY_BEHAVIOR_POINT | DOTA_ABILITY_BEHAVIOR_UNIT_TARGET"				   
		"AbilityUnitTargetTeam"			"DOTA_UNIT_TARGET_TEAM_ENEMY"
		"AbilityUnitTargetType"			"DOTA_UNIT_TARGET_HERO | DOTA_UNIT_TARGET_BASIC"	   
		"AbilityUnitTargetFlags"		"DOTA_UNIT_TARGET_FLAG_MAGIC_IMMUNE_ENEMIES"
		"SpellImmunityType"				"SPELL_IMMUNITY_ENEMIES_NO"
		"AbilityUnitDamageType"			"DAMAGE_TYPE_MAGICAL"	
		"FightRecapLevel"				"1"
		"AbilityTextureName"			"dragon_knight_breathe_fire"
		"MaxLevel"						"7"
		"HasScepterUpgrade"				"1"

		// Precache
		//-------------------------------------------------------------------------------------------------------------
		"precache"
		{
			"soundfile"		"soundevents/game_sounds_heroes/game_sounds_dragon_knight.vsndevts"
			"particle"		"particles/units/heroes/hero_dragon_knight/dragon_knight_breathe_fire.vpcf"
			"particle"		"particles/units/heroes/hero_huskar/huskar_burning_spear_debuff.vpcf"
		}


		// Casting
		//-------------------------------------------------------------------------------------------------------------
		"AbilityCastRange"				"500"
		"AbilityCastPoint"				"0"

		// Time		
		//-------------------------------------------------------------------------------------------------------------
		"AbilityCooldown"				"12.0 12.0 12.0 12.0 12.0 12.0 12.0"
		
		// Damage.
		//-------------------------------------------------------------------------------------------------------------
		"AbilityDamage"					"90 170 240 300 350 410 600"
		
		// Cost
		//-------------------------------------------------------------------------------------------------------------
		"AbilityManaCost"				"100 110 120 130 140 150 160"
		
		// Special	
		//-------------------------------------------------------------------------------------------------------------
		"AbilitySpecial"
		{
			"01"
			{
				"var_type"				"FIELD_INTEGER"
				"start_radius"			"150"
			}
			"02"
			{
				"var_type"				"FIELD_INTEGER"
				"end_radius"			"250"
			}
			"03"
			{
				"var_type"				"FIELD_INTEGER"
				"range"					"650"
			}
			"04"
			{
				"var_type"				"FIELD_INTEGER"
				"speed"					"1050"
			}
			"05"
			{
				"var_type"				"FIELD_INTEGER"
				"debuff_dmg_reduction_pct"		"-20 -25 -30 -35 -40 -45 -50"
			}
			"06"
			{
				"var_type"				"FIELD_INTEGER"
				"debuff_slow_pct"		"-10 -15 -20 -25 -30 -35 -40"
			}
			"07"
			{
				"var_type"				"FIELD_INTEGER"
				"debuff_miss_pct"		"5 10 15 20 25 30 35"
			}
			"08"
			{
				"var_type"				"FIELD_INTEGER"
				"debuff_damage_per_sec"	"10 15 20 25 30 35 40"
			}
			"09"
			{
				"var_type"				"FIELD_FLOAT"
				"debuff_damage_interval"	"0.5"
			}
			"10"
			{
				"var_type"				"FIELD_FLOAT"
				"debuff_duration"		"11.0"
			}
		}
		
		"OnSpellStart"
		{
			"FireSound"
			{
				"EffectName" "Hero_DragonKnight.BreathFire"
				"Target" "CASTER"
			}
			"RunScript"
			{
				"ScriptFile"	"heroes/hero_dragon_knight/breathe_fire.lua"
				"Function"		"FireProjectile"
				"Target"		"POINT"
			}
		}
		
		"OnProjectileHitUnit"
		{
			"DeleteOnHit" "0"

			"ApplyModifier"
			{
				"ModifierName"	"modifier_breathe_fire_arena_debuff"
				"Target" 		"TARGET"
			}

			"Damage"
			{
				"Target" "TARGET"
				"Type" "DAMAGE_TYPE_MAGICAL"
				"Damage" "%AbilityDamage"
			}
		}

		"Modifiers"
		{
			"modifier_breathe_fire_arena_debuff"
			{
				"IsDebuff"		"1"
				"IsPurgable"	"1"
				"Duration"		"%debuff_duration"

				"EffectName"		"particles/units/heroes/hero_huskar/huskar_burning_spear_debuff.vpcf"
				"EffectAttachType"	"follow_origin"

				"Properties"
				{
					"MODIFIER_PROPERTY_BASEDAMAGEOUTGOING_PERCENTAGE"	"%debuff_dmg_reduction_pct"
					"MODIFIER_PROPERTY_MOVESPEED_BONUS_PERCENTAGE"		"%debuff_slow_pct"
					"MODIFIER_PROPERTY_MISS_PERCENTAGE"					"%debuff_miss_pct"
				}

				"ThinkInterval"  "%debuff_damage_interval"
				"OnIntervalThink"
				{
					"Damage"
					{
						"Target"		"TARGET"
						"Type"			"DAMAGE_TYPE_MAGICAL"
						"Damage"		"%debuff_damage_per_sec * %debuff_damage_interval"
					}
				}
			}
		}
	}

	"dragon_knight_dragon_tail_arena"
	{
		// General
		//-------------------------------------------------------------------------------------------------------------
		"BaseClass"						"ability_lua"
		"ScriptFile"					"heroes/hero_dragon_knight/dragon_tail_lua.lua"
		"AbilityBehavior"				"DOTA_ABILITY_BEHAVIOR_UNIT_TARGET"
		"AbilityUnitTargetTeam"			"DOTA_UNIT_TARGET_TEAM_ENEMY"
		"AbilityUnitTargetType"			"DOTA_UNIT_TARGET_HERO | DOTA_UNIT_TARGET_BASIC"
		"AbilityUnitDamageType"			"DAMAGE_TYPE_MAGICAL"	
		"SpellImmunityType"				"SPELL_IMMUNITY_ENEMIES_NO"
		"FightRecapLevel"				"1"
		"AbilityTextureName"			"dragon_knight_dragon_tail"
		"MaxLevel"	"7"

		// Precache
		//-------------------------------------------------------------------------------------------------------------
		"precache"
		{
			"soundfile"		"soundevents/game_sounds_heroes/game_sounds_dragon_knight.vsndevts"
			"particle"		"particles/units/heroes/hero_dragon_knight/dragon_knight_dragon_tail.vpcf"
		}

		"AbilityCastPoint"				"0.0 0.0 0.0 0.0"
		"AbilityCooldown"				"11"
		"AbilityDamage"					"25 50 75 100 125 150 175"
		"AbilityManaCost"				"100 100 100 100 100 100 100"
		
		// Special	
		//-------------------------------------------------------------------------------------------------------------
		"AbilitySpecial"
		{
			"01"
			{
				"var_type"				"FIELD_FLOAT"
				"stun_duration"			"2.5 2.75 3 3.25 3.5 3.75 4"
			}
			"02"
			{
				"var_type"				"FIELD_INTEGER"
				"dragon_cast_range"			"400"
			}
			"03"
			{
				"var_type"				"FIELD_INTEGER"
				"attack_amount"			"0 0 0 1 1 1 2"
			}
			"04"
			{
				"var_type"				"FIELD_FLOAT"
				"attack_delay"			"1 0.9 0.7 0.5 0.3 0.1 0.0"
			}
			"05"
			{
				"var_type"				"FIELD_INTEGER"
				"cast_range"			"150"
			}
		}
	}

	"dragon_knight_dragon_blood_arena"
	{
		// General
		//-------------------------------------------------------------------------------------------------------------
		"BaseClass"				"ability_datadriven"
		"AbilityBehavior"		"DOTA_ABILITY_BEHAVIOR_PASSIVE"
		"AbilityTextureName"	"dragon_knight_dragon_blood"
		"MaxLevel"	"7"
		"HasScepterUpgrade"		"1"
		"LevelsBetweenUpgrades"	"5"

		"AbilityCooldown"				"5.0"
		
		// Special
		//-------------------------------------------------------------------------------------------------------------
		"AbilitySpecial"
		{
			"01"
			{
				"var_type"					"FIELD_INTEGER"
				"bonus_health_regen"		"6 9 12 15 20 25 30"
			}
			"02"
			{
				"var_type"					"FIELD_INTEGER"
				"bonus_armor"				"6 9 12 15 20 25 30"
			}
			"03"
			{
				"var_type"					"FIELD_INTEGER"
				"bonus_magical_resist_pct"	"8 10 12 14 16 18 20"
			}
			"04"
			{
				"var_type"					"FIELD_INTEGER"
				"disarm_chance"				"5 7 9 11 13 15 17"
			}
			"05"
			{
				"var_type"					"FIELD_FLOAT"
				"disarm_duration"			"1.0 1.25 1.5 1.75 2.0 2.25 2.5"
			}
			"06"
			{
				"var_type"					"FIELD_FLOAT"
				"sheep_movement_speed_scepter"		"100"
			}
		}
		"Modifiers"
		{
			"modifier_dragon_blood_arena"
			{
				"Passive"	"1"
				"IsHidden"	"1"

				"Properties"
				{
					"MODIFIER_PROPERTY_PHYSICAL_ARMOR_BONUS"		"%bonus_armor"
					"MODIFIER_PROPERTY_HEALTH_REGEN_CONSTANT"		"%bonus_health_regen"
					"MODIFIER_PROPERTY_MAGICAL_RESISTANCE_BONUS"	"%bonus_magical_resist_pct"
				}

				"OnAttacked"
				{
					"Random"
					{
						"Chance"			"%disarm_chance"
						"OnSuccess"
						{
							"RunScript"
							{
								"ScriptFile"	"heroes/hero_dragon_knight/dragon_blood.lua"
								"Function"		"Disarm"
							}
						}
					}
				}
			}

			"modifier_dragon_blood_arena_disarm_enemy"
			{
				"Passive"	"0"
				"IsHidden"	"0"
				"Duration"	"%disarm_duration"
				"IsPurgable"		"1"
				"IsDebuff"	"1"

				"EffectName"	"particles/generic_gameplay/generic_disarm.vpcf"
				"EffectAttachType"	"follow_overhead"

				"States"
				{
					"MODIFIER_STATE_DISARMED"		"MODIFIER_STATE_VALUE_ENABLED"
				}
			}
		}
	}

	"dragon_knight_elder_dragon_form_arena"
	{
		// General
		//-------------------------------------------------------------------------------------------------------------
		"BaseClass"						"ability_datadriven"
		"AbilityBehavior"				"DOTA_ABILITY_BEHAVIOR_NO_TARGET"
		"AbilityType"					"DOTA_ABILITY_TYPE_ULTIMATE"
		"SpellImmunityType"				"SPELL_IMMUNITY_ENEMIES_YES"
		"FightRecapLevel"				"2"
		"AbilityTextureName"			"dragon_knight_elder_dragon_form"
		"MaxLevel"	"7"

		// Precache
		//-------------------------------------------------------------------------------------------------------------
		"precache"
		{
			"soundfile"		"soundevents/game_sounds_heroes/game_sounds_dragon_knight.vsndevts"
			//1
				"model"			"models/heroes/dragon_knight/dragon_knight_dragon.vmdl"
				"particle"		"particles/units/heroes/hero_dragon_knight/dragon_knight_elder_dragon_fire.vpcf"
				"particle"		"particles/units/heroes/hero_dragon_knight/dragon_knight_transform_red.vpcf"
			//2
				"model"			"models/heroes/viper/viper.vmdl"
				"particle"		"particles/units/heroes/hero_viper/viper_poison_attack.vpcf"
			//3
				"model"			"models/heroes/puck/puck.vmdl"
				"particle"		"particles/econ/items/puck/puck_alliance_set/puck_base_attack_aproset.vpcf"
			//4
				"model"			"models/heroes/phoenix/phoenix_bird.vmdl"
				"particle"		"particles/units/heroes/hero_phoenix/phoenix_base_attack.vpcf"
			//5
				"model"			"models/heroes/jakiro/jakiro.vmdl"
				"particle"		"particles/units/heroes/hero_jakiro/jakiro_base_attack.vpcf"
				"particle"		"particles/units/heroes/hero_jakiro/jakiro_base_attack_fire.vpcf"
				"particle"		"particles/units/heroes/hero_jakiro/jakiro_dual_breath_ice.vpcf"
				"particle"		"particles/units/heroes/hero_jakiro/jakiro_dual_breath_fire.vpcf"
			//6
				"model"			"models/heroes/winterwyvern/winterwyvern.vmdl"
				"particle"		"particles/units/heroes/hero_winter_wyvern/winter_wyvern_arctic_attack.vpcf"
				"particle"		"particles/units/heroes/hero_winter_wyvern/wyvern_cold_embrace_borealis.vpcf"
			//7
				"model"			"models/heroes/visage/visage_familiar.vmdl"
				"particle"		"particles/econ/items/visage/immortal_familiar/visage_immortal_ti5/visage_familiar_base_attack_ti5.vpcf"
		}

		// Time		
		//-------------------------------------------------------------------------------------------------------------
		"AbilityCooldown"				"115.0 115.0 115.0 115.0 115.0 115.0 115.0"
		"AbilityManaCost"				"50 50 50 50 50 50 50"	
		"AbilityModifierSupportValue"	"0.35"

		// Special
		//-------------------------------------------------------------------------------------------------------------
		"AbilitySpecial"
		{
			"01"
			{
				"var_type"					"FIELD_FLOAT"
				"duration"					"60.0"
			}
			"02"
			{
				"var_type"					"FIELD_INTEGER"
				"bonus_movement_speed"		"25"
			}
			"03"
			{
				"var_type"					"FIELD_INTEGER"
				"bonus_attack_range"		"372"
			}
			//1
			"04"
			{
				"var_type"					"FIELD_INTEGER"
				"splash_radius"				"225"
			}
			"05"
			{
				"var_type"					"FIELD_INTEGER"
				"splash_damage_percent"		"40"
			}
			//2
			"06"
			{
				"var_type"					"FIELD_INTEGER"
				"poison_damage"	"20"
			}
			"07"
			{
				"var_type"					"FIELD_FLOAT"
				"poison_duration"	"5.0"
			}
			//3
			"08"
			{
				"var_type"					"FIELD_INTEGER"
				"silence_chance"			"15"
			}
			"09"
			{
				"var_type"					"FIELD_FLOAT"
				"silence_duration"			"1.25"
			}
			//4
			"10"
			{
				"var_type"					"FIELD_INTEGER"
				"flame_duration"			"15"
			}
			"11"
			{
				"var_type"					"FIELD_INTEGER"
				"flame_damage"				"20"
			}
			//5
			"12"
			{
				"var_type"					"FIELD_INTEGER"
				"breath_chance"				"15"
			}
			"13"
			{
				"var_type"					"FIELD_INTEGER"
				"breath_distance"			"750"
			}
			"14"
			{
				"var_type"					"FIELD_INTEGER"
				"breath_speed"				"-20"
			}
			"15"
			{
				"var_type"					"FIELD_INTEGER"
				"breath_start_radius"		"250"
			}
			"16"
			{
				"var_type"					"FIELD_INTEGER"
				"breath_end_radius"			"300"
			}
			"17"
			{
				"var_type"					"FIELD_FLOAT"
				"breath_debuff_duration"	"3.0"
			}
			"18"
			{
				"var_type"					"FIELD_INTEGER"
				"breath_debuff_slow_pct"	"25"
			}
			"19"
			{
				"var_type"					"FIELD_INTEGER"
				"breath_damage"				"250"
			}
			//6
			"20"
			{
				"var_type"						"FIELD_INTEGER"
				"cold_bonus_movement_speed_pct"	"-25"
			}
			"21"
			{
				"var_type"						"FIELD_INTEGER"
				"cold_bonus_attack_speed"		"-20"
			}
			"22"
			{
				"var_type"						"FIELD_FLOAT"
				"cold_duration"					"3.0"
			}
			"23"
			{
				"var_type"						"FIELD_INTEGER"
				"cold_damage_pct"				"2"
			}
			//7
			"24"
			{
				"var_type"											"FIELD_INTEGER"
				"illusion_amount"							"2"
			}
			"25"
			{
				"var_type"											"FIELD_INTEGER"
				"illusion_damage_percent_outgoing"			"-70"
			}
			"26"
			{
				"var_type"											"FIELD_INTEGER"
				"illusion_damage_percent_outgoing_tooltip"	"30"
			}	
			"27"
			{
				"var_type"											"FIELD_INTEGER"
				"illusion_damage_percent_incoming"			"200"
			}
			"28"
			{
				"var_type"											"FIELD_INTEGER"
				"illusion_damage_percent_incoming_tooltip"	"300"
			}
		}

		"OnSpellStart"
		{
			"RunScript"
			{
				"ScriptFile"	"heroes/hero_dragon_knight/elder_dragon_form.lua"
				"Function"		"OnSpellStart"
			}
		}

		"OnProjectileHitUnit"
		{
			"DeleteOnHit"	"0"
			
			"ApplyModifier"
			{
				"ModifierName"	"modifier_dragon_knight_elder_dragon_form_arena_breath"
				"Target" 		"TARGET"
			}
		}

		"Modifiers"
		{
			"modifier_dragon_knight_elder_dragon_form_arena_poison"
			{
				"Passive"			"0"
				"IsHidden"			"0"
				"IsDebuff"			"1"
				"Duration"			"%poison_duration"
		
				"EffectName"		"particles/units/heroes/hero_viper/viper_poison_debuff.vpcf"
				"EffectAttachType"	"follow_origin"
		
				"ThinkInterval"  "1.0"
				"OnIntervalThink"
				{
					"RunScript"
					{
						"ScriptFile"	"heroes/hero_dragon_knight/elder_dragon_form.lua"
						"Function"		"PoisonDamage"
					}
				}
			}

			"modifier_dragon_knight_elder_dragon_form_arena_cold"
			{
				"Passive"			"0"
				"IsHidden"			"0"
				"IsDebuff"			"1"
				"Duration"			"%cold_duration"
			
				"EffectName"		"particles/units/heroes/hero_winter_wyvern/wyvern_cold_embrace_borealis.vpcf"
				"EffectAttachType"	"follow_origin"

				"ThinkInterval"  "1.0"
				"OnIntervalThink"
				{
					"RunScript"
					{
						"ScriptFile"	"heroes/hero_dragon_knight/elder_dragon_form.lua"
						"Function"		"ColdDamage"
					}
				}
			
				"Properties"
				{
					"MODIFIER_PROPERTY_ATTACKSPEED_BONUS_CONSTANT" "%cold_bonus_attack_speed"
					"MODIFIER_PROPERTY_MOVESPEED_BONUS_PERCENTAGE" "%cold_bonus_movement_speed_pct" 
				}
			}

			"modifier_dragon_knight_elder_dragon_form_arena_breath"
			{
				"Passive"			"0"
				"IsHidden"			"0"
				"IsDebuff"			"1"
				"Duration"			"%breath_debuff_duration"

				"OnCreated"
				{
					"Damage"
					{
						"Target"		"TARGET"
						"Type"			"DAMAGE_TYPE_MAGICAL"
						"Damage"		"%breath_damage"
					}
				}
			
				"Properties"
				{
					"MODIFIER_PROPERTY_MOVESPEED_BONUS_PERCENTAGE" "%breath_debuff_slow_pct"
				}
			}

			"modifier_dragon_knight_elder_dragon_form_arena_flame_debuff"
			{
				"Passive"			"0"
				"IsHidden"			"1"
				"IsDebuff"			"1"
				"Duration"			"%flame_duration"
				"Attributes"		"MODIFIER_ATTRIBUTE_MULTIPLE"

				"EffectName"		"particles/units/heroes/hero_huskar/huskar_burning_spear_debuff.vpcf"
				"EffectAttachType"	"follow_origin"

				"OnCreated"
				{
					"RunScript"
					{
						"ScriptFile"	"heroes/hero_dragon_knight/elder_dragon_form.lua"
						"Function"		"AddDebuffStack"
					}
				}

				"OnDestroy"
				{
					"RunScript"
					{
						"ScriptFile"	"heroes/hero_dragon_knight/elder_dragon_form.lua"
						"Function"		"RemoveDebuffStack"
					}
				}

				"ThinkInterval"  "1.0"
				"OnIntervalThink"
				{
					"Damage"
					{
						"Target"		"TARGET"
						"Type"			"DAMAGE_TYPE_MAGICAL"
						"Damage"		"%flame_damage"
					}
				}
			}

			"modifier_dragon_knight_elder_dragon_form_arena_flame_debuff_tooltip"
			{
				"IsDebuff"			"1"
				"Duration"			"%flame_duration"
			}
		}
	}
}